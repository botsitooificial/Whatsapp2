process['env']['NODE_TLS_REJECT_UNAUTHORIZED']='0';import'./config.js';import'./api.js';import{createRequire}from'module';import _0x39d954,{join}from'path';import{fileURLToPath,pathToFileURL}from'url';import{platform}from'process';import*as _0x34e2ed from'ws';import{readdirSync,statSync,unlinkSync,existsSync,readFileSync,rmSync,watch}from'fs';import _0x4340dd from'yargs';import{spawn}from'child_process';import _0x195a2d from'lodash';import _0x5003ff from'chalk';import _0x46a9fd from'syntax-error';import{tmpdir}from'os';import{format}from'util';import _0x45c269 from'pino';import _0x3169ea from'pino';import{Boom}from'@hapi/boom';import{makeWASocket,protoType,serialize}from'./lib/simple.js';import{Low,JSONFile}from'lowdb';import{mongoDB,mongoDBV2}from'./lib/mongoDB.js';import _0x4dee90 from'./lib/store.js';const {proto}=(await import('@whiskeysockets/baileys'))['default'],{DisconnectReason,useMultiFileAuthState,MessageRetryMap,fetchLatestBaileysVersion,makeCacheableSignalKeyStore}=await import('@whiskeysockets/baileys'),{CONNECTING}=_0x34e2ed,{chain}=_0x195a2d,PORT=process['env']['PORT']||process['env']['SERVER_PORT']||0xbb8;protoType(),serialize(),global['__filename']=function filename(_0x125531=import.meta['url'],_0x4c3b2b=platform!=='win32'){return _0x4c3b2b?/file:\/\/\//['test'](_0x125531)?fileURLToPath(_0x125531):_0x125531:pathToFileURL(_0x125531)['toString']();},global['__dirname']=function dirname(_0x571d3f){return _0x39d954['dirname'](global['__filename'](_0x571d3f,!![]));},global['__require']=function require(_0x37def7=import.meta['url']){return createRequire(_0x37def7);},global['API']=(_0x143a55,_0x49f752='/',_0x250cc0={},_0x53299b)=>(_0x143a55 in global['APIs']?global['APIs'][_0x143a55]:_0x143a55)+_0x49f752+(_0x250cc0||_0x53299b?'?'+new URLSearchParams(Object['entries']({..._0x250cc0,..._0x53299b?{[_0x53299b]:global['APIKeys'][_0x143a55 in global['APIs']?global['APIs'][_0x143a55]:_0x143a55]}:{}})):''),global['timestamp']={'start':new Date()},global['videoList']=[],global['videoListXXX']=[];const __dirname=global['__dirname'](import.meta['url']);global['opts']=new Object(_0x4340dd(process['argv']['slice'](0x2))['exitProcess'](![])['parse']()),global['prefix']=new RegExp('^['+(opts['prefix']||'*/i!#$%+£¢€¥^°=¶∆×÷π√✓©®:;?&.\x5c-.@')['replace'](/[|\\{}()[\]^$+*?.\-\^]/g,'\x5c$&')+']'),global['db']=new Low(/https?:\/\//['test'](opts['db']||'')?new cloudDBAdapter(opts['db']):new JSONFile((opts['_'][0x0]?opts['_'][0x0]+'_':'')+'database.json')),global['DATABASE']=global['db'],global['loadDatabase']=async function loadDatabase(){if(global['db']['READ'])return new Promise(_0x33f884=>setInterval(async function(){!global['db']['READ']&&(clearInterval(this),_0x33f884(global['db']['data']==null?global['loadDatabase']():global['db']['data']));},0x1*0x3e8));if(global['db']['data']!==null)return;global['db']['READ']=!![],await global['db']['read']()['catch'](console['error']),global['db']['READ']=null,global['db']['data']={'users':{},'chats':{},'stats':{},'msgs':{},'sticker':{},'settings':{},...global['db']['data']||{}},global['db']['chain']=chain(global['db']['data']);},loadDatabase(),global['chatgpt']=new Low(new JSONFile(_0x39d954['join'](__dirname,'/db/chatgpt.json'))),global['loadChatgptDB']=async function loadChatgptDB(){if(global['chatgpt']['READ'])return new Promise(_0x57a2f5=>setInterval(async function(){!global['chatgpt']['READ']&&(clearInterval(this),_0x57a2f5(global['chatgpt']['data']===null?global['loadChatgptDB']():global['chatgpt']['data']));},0x1*0x3e8));if(global['chatgpt']['data']!==null)return;global['chatgpt']['READ']=!![],await global['chatgpt']['read']()['catch'](console['error']),global['chatgpt']['READ']=null,global['chatgpt']['data']={'users':{},...global['chatgpt']['data']||{}},global['chatgpt']['chain']=_0x195a2d['chain'](global['chatgpt']['data']);},loadChatgptDB(),global['authFile']='Session-activa';const {state,saveState,saveCreds}=await useMultiFileAuthState(global['authFile']),msgRetryCounterMap=_0x229b61=>{},{version}=await fetchLatestBaileysVersion(),connectionOptions={'printQRInTerminal':!![],'patchMessageBeforeSending':_0x20f156=>{const _0x1eec28=!!(_0x20f156['buttonsMessage']||_0x20f156['templateMessage']||_0x20f156['listMessage']);return _0x1eec28&&(_0x20f156={'viewOnceMessage':{'message':{'messageContextInfo':{'deviceListMetadataVersion':0x2,'deviceListMetadata':{}},..._0x20f156}}}),_0x20f156;},'getMessage':async _0xe96c96=>{if(_0x4dee90){const _0x3ede84=await _0x4dee90['loadMessage'](_0xe96c96['remoteJid'],_0xe96c96['id']);return conn['chats'][_0xe96c96['remoteJid']]&&conn['chats'][_0xe96c96['remoteJid']]['messages'][_0xe96c96['id']]?conn['chats'][_0xe96c96['remoteJid']]['messages'][_0xe96c96['id']]['message']:undefined;}return proto['Message']['fromObject']({});},'msgRetryCounterMap':msgRetryCounterMap,'logger':_0x3169ea({'level':'silent'}),'auth':{'creds':state['creds'],'keys':makeCacheableSignalKeyStore(state['keys'],_0x3169ea({'level':'silent'}))},'browser':['HADES-BOT-MD','Safari','1.0.0'],'version':version,'defaultQueryTimeoutMs':undefined};global['conn']=makeWASocket(connectionOptions),conn['isInit']=![],conn['well']=![],conn['logger']['info']('Ƈᴀʀɢᴀɴᴅᴏ．．．\x0a');!opts['test']&&(global['db']&&setInterval(async()=>{if(global['db']['data'])await global['db']['write']();if(opts['autocleartmp']&&(global['support']||{})['find'])tmp=[os['tmpdir'](),'tmp','jadibts'],tmp['forEach'](_0x1edcfa=>cp['spawn']('find',[_0x1edcfa,'-amin','3','-type','f','-delete']));},0x1e*0x3e8));if(opts['server'])(await import('./server.js'))['default'](global['conn'],PORT);function clearTmp(){const _0x1b76dd=[tmpdir(),join(__dirname,'./tmp')],_0x41f32a=[];return _0x1b76dd['forEach'](_0x45b959=>readdirSync(_0x45b959)['forEach'](_0x362248=>_0x41f32a['push'](join(_0x45b959,_0x362248)))),_0x41f32a['map'](_0x547115=>{const _0x5516c0=statSync(_0x547115);if(_0x5516c0['isFile']()&&Date['now']()-_0x5516c0['mtimeMs']>=0x3e8*0x3c*0x3)return unlinkSync(_0x547115);return![];});}function purgeSession(){let _0x358917=[],_0x18e215=readdirSync('./Session-activa'),_0x2dbcf8=_0x18e215['filter'](_0x505151=>{return _0x505151['startsWith']('pre-key-');});_0x358917=[..._0x358917,..._0x2dbcf8],_0x2dbcf8['forEach'](_0x423063=>{unlinkSync('./Session-activa/'+_0x423063);});}function purgeSessionSB(){try{let _0x2f5f35=readdirSync('./jadibts/'),_0x56db3d=[];_0x2f5f35['forEach'](_0x574455=>{if(statSync('./jadibts/'+_0x574455)['isDirectory']()){let _0x504eb4=readdirSync('./jadibts/'+_0x574455)['filter'](_0x1b3f0f=>{return _0x1b3f0f['startsWith']('pre-key-');});_0x56db3d=[..._0x56db3d,..._0x504eb4],_0x504eb4['forEach'](_0x1c1f05=>{unlinkSync('./jadibts/'+_0x574455+'/'+_0x1c1f05);});}});if(_0x56db3d['length']===0x0)return;}catch(_0x1399dd){console['log'](_0x5003ff['bold']['red']('=>\x20Algo\x20salio\x20mal\x20durante\x20la\x20eliminación,\x20archivos\x20no\x20eliminados'));}}function purgeOldFiles(){const _0x43e279=['./Session-activa/','./jadibts/'],_0x1dfc02=Date['now']()-0x3c*0x3c*0x3e8;_0x43e279['forEach'](_0x470c8d=>{readdirSync(_0x470c8d,(_0x4d4e,_0xae0bb0)=>{if(_0x4d4e)throw _0x4d4e;_0xae0bb0['forEach'](_0x425bb5=>{const _0x524f7a=_0x39d954['join'](_0x470c8d,_0x425bb5);stat(_0x524f7a,(_0x55e23a,_0x86b7a2)=>{if(_0x55e23a)throw _0x55e23a;_0x86b7a2['isFile']()&&_0x86b7a2['mtimeMs']<_0x1dfc02&&_0x425bb5!=='creds.json'?unlinkSync(_0x524f7a,_0x3308a9=>{if(_0x3308a9)throw _0x3308a9;console['log'](_0x5003ff['bold']['green']('Archivo\x20'+_0x425bb5+'\x20borrado\x20con\x20éxito'));}):console['log'](_0x5003ff['bold']['red']('Archivo\x20'+_0x425bb5+'\x20no\x20borrado'+_0x55e23a));});});});});}async function connectionUpdate(_0x10cdfa){const {connection:_0x207364,lastDisconnect:_0x52b8fe,isNewLogin:_0x1aeaa4}=_0x10cdfa;global['stopped']=_0x207364;if(_0x1aeaa4)conn['isInit']=!![];const _0x24e279=_0x52b8fe?.['error']?.['output']?.['statusCode']||_0x52b8fe?.['error']?.['output']?.['payload']?.['statusCode'];_0x24e279&&_0x24e279!==DisconnectReason['loggedOut']&&conn?.['ws']['socket']==null&&(await global['reloadHandler'](!![])['catch'](console['error']),global['timestamp']['connect']=new Date());if(global['db']['data']==null)loadDatabase();_0x10cdfa['qr']!=0x0&&_0x10cdfa['qr']!=undefined&&console['log'](_0x5003ff['yellow']('💥\x20Scan\x20this\x20QR\x20code,\x20the\x20QR\x20code\x20expires\x20in\x2060\x20seconds.'));_0x207364=='open'&&console['log'](_0x5003ff['yellow']('▣──────────────────────────────···\x0a│\x0a│❧\x20𝙲𝙾𝙽𝙴𝙲𝚃𝙰𝙳𝙾\x20𝙲𝙾𝚁𝚁𝙴𝙲𝚃𝙰𝙼𝙴𝙽𝚃𝙴\x20𝙰𝙻\x20𝚆𝙷𝙰𝚃𝚂𝙰𝙿𝙿\x20✅\x0a│\x0a▣──────────────────────────────···'));let _0x14ee54=new Boom(_0x52b8fe?.['error'])?.['output']?.['statusCode'];if(_0x207364==='close'){if(_0x14ee54===DisconnectReason['badSession'])conn['logger']['error']('[\x20⚠\x20]\x20Incorrect\x20session,\x20please\x20delete\x20the\x20folder\x20'+global['authFile']+'\x20and\x20scan\x20again.');else{if(_0x14ee54===DisconnectReason['connectionClosed'])conn['logger']['warn']('[\x20⚠\x20]\x20Connection\x20closed,\x20reconnecting...'),await global['reloadHandler'](!![])['catch'](console['error']);else{if(_0x14ee54===DisconnectReason['connectionLost'])conn['logger']['warn']('[\x20⚠\x20]\x20Lost\x20connection\x20to\x20the\x20server,\x20reconnecting...'),await global['reloadHandler'](!![])['catch'](console['error']);else{if(_0x14ee54===DisconnectReason['connectionReplaced'])conn['logger']['error']('[\x20⚠\x20]\x20Connection\x20replaced,\x20another\x20new\x20session\x20has\x20been\x20opened.\x20Please\x20log\x20out\x20of\x20the\x20current\x20session\x20first.');else{if(_0x14ee54===DisconnectReason['loggedOut'])conn['logger']['error']('[\x20⚠\x20]\x20Connection\x20closed,\x20please\x20delete\x20the\x20folder\x20'+global['authFile']+'\x20and\x20scan\x20again.');else{if(_0x14ee54===DisconnectReason['restartRequired'])conn['logger']['info']('[\x20⚠\x20]\x20Reboot\x20required,\x20restart\x20the\x20server\x20if\x20you\x20have\x20any\x20problems.'),await global['reloadHandler'](!![])['catch'](console['error']);else _0x14ee54===DisconnectReason['timedOut']?(conn['logger']['warn']('[\x20⚠\x20]\x20Connection\x20timed\x20out,\x20reconnecting...'),await global['reloadHandler'](!![])['catch'](console['error'])):(conn['logger']['warn']('[\x20⚠\x20]\x20Unknown\x20disconnection\x20reason.\x20'+(_0x14ee54||'')+':\x20'+(_0x207364||'')),await global['reloadHandler'](!![])['catch'](console['error']));}}}}}}}process['on']('uncaughtException',console['error']);let isInit=!![],handler=await import('./handler.js');global['reloadHandler']=async function(_0x2826e7){try{const _0xc2f0bc=await import('./handler.js?update='+Date['now']())['catch'](console['error']);if(Object['keys'](_0xc2f0bc||{})['length'])handler=_0xc2f0bc;}catch(_0x355590){console['error'](_0x355590);}if(_0x2826e7){const _0x25712f=global['conn']['chats'];try{global['conn']['ws']['close']();}catch{}conn['ev']['removeAllListeners'](),global['conn']=makeWASocket(connectionOptions,{'chats':_0x25712f}),isInit=!![];}!isInit&&(conn['ev']['off']('messages.upsert',conn['handler']),conn['ev']['off']('group-participants.update',conn['participantsUpdate']),conn['ev']['off']('groups.update',conn['groupsUpdate']),conn['ev']['off']('message.delete',conn['onDelete']),conn['ev']['off']('call',conn['onCall']),conn['ev']['off']('connection.update',conn['connectionUpdate']),conn['ev']['off']('creds.update',conn['credsUpdate']));conn['welcome']='乂✰@subject\x0a乂✰@user\x0a\x20Welcome\x20to\x20the\x20group\x20please\x20read\x20the\x20description\x20to\x20avoid\x20having\x20problems\x20with\x20the\x20group\x20creator\x0a\x0a@desc\x0a\x0a乂✰Enjoy\x20your\x20stay',conn['bye']='乂✰@user\x0a乂✰Left\x20the\x20group\x20goodbye\x20come\x20back\x20soon',conn['spromote']='乂✰@user\x0a乂✰Has\x20joined\x20the\x20management\x20team\x20',conn['sdemote']='乂✰@user\x0a乂\x20Admin\x20team\x20abandoned!!',conn['sDesc']='乂✰Group\x20description\x20has\x20been\x20changed\x0a@desc',conn['sSubject']='乂✰The\x20group\x20name\x20has\x20been\x20changed\x0a@subject',conn['sIcon']='乂✰The\x20group\x20image\x20has\x20been\x20modified',conn['sRevoke']='乂✰Group\x20link\x20updated\x0a@revoke',conn['handler']=handler['handler']['bind'](global['conn']),conn['participantsUpdate']=handler['participantsUpdate']['bind'](global['conn']),conn['groupsUpdate']=handler['groupsUpdate']['bind'](global['conn']),conn['onDelete']=handler['deleteUpdate']['bind'](global['conn']),conn['onCall']=handler['callUpdate']['bind'](global['conn']),conn['connectionUpdate']=connectionUpdate['bind'](global['conn']),conn['credsUpdate']=saveCreds['bind'](global['conn'],!![]);const _0x3ff0a4=new Date(),_0x498325=new Date(conn['ev']);if(_0x3ff0a4>=_0x498325){const _0x6264ad=Object['entries'](conn['chats'])['filter'](([_0x3d781a,_0x345e7c])=>!_0x3d781a['endsWith']('@g.us')&&_0x345e7c['isChats'])['map'](_0x4612c6=>_0x4612c6[0x0]);}else{const _0x511c74=Object['entries'](conn['chats'])['filter'](([_0x1b0c55,_0x4c5378])=>!_0x1b0c55['endsWith']('@g.us')&&_0x4c5378['isChats'])['map'](_0x567a90=>_0x567a90[0x0]);}return conn['ev']['on']('messages.upsert',conn['handler']),conn['ev']['on']('group-participants.update',conn['participantsUpdate']),conn['ev']['on']('groups.update',conn['groupsUpdate']),conn['ev']['on']('message.delete',conn['onDelete']),conn['ev']['on']('call',conn['onCall']),conn['ev']['on']('connection.update',conn['connectionUpdate']),conn['ev']['on']('creds.update',conn['credsUpdate']),isInit=![],!![];};const pluginFolder=global['__dirname'](join(__dirname,'./plugins/index')),pluginFilter=_0x31c8cb=>/\.js$/['test'](_0x31c8cb);global['plugins']={};async function filesInit(){for(const _0x38bf32 of readdirSync(pluginFolder)['filter'](pluginFilter)){try{const _0x3da027=global['__filename'](join(pluginFolder,_0x38bf32)),_0xd3f38f=await import(_0x3da027);global['plugins'][_0x38bf32]=_0xd3f38f['default']||_0xd3f38f;}catch(_0x1692c6){conn['logger']['error'](_0x1692c6),delete global['plugins'][_0x38bf32];}}}filesInit()['then'](_0x436d44=>Object['keys'](global['plugins']))['catch'](console['error']),global['reload']=async(_0x2d33dc,_0x122096)=>{if(pluginFilter(_0x122096)){const _0x202bd4=global['__filename'](join(pluginFolder,_0x122096),!![]);if(_0x122096 in global['plugins']){if(existsSync(_0x202bd4))conn['logger']['info']('\x20updated\x20plugin\x20-\x20\x27'+_0x122096+'\x27');else return conn['logger']['warn']('deleted\x20plugin\x20-\x20\x27'+_0x122096+'\x27'),delete global['plugins'][_0x122096];}else conn['logger']['info']('new\x20plugin\x20-\x20\x27'+_0x122096+'\x27');const _0x448376=_0x46a9fd(readFileSync(_0x202bd4),_0x122096,{'sourceType':'module','allowAwaitOutsideFunction':!![]});if(_0x448376)conn['logger']['error']('syntax\x20error\x20while\x20loading\x20\x27'+_0x122096+'\x27\x0a'+format(_0x448376));else try{const _0x152173=await import(global['__filename'](_0x202bd4)+'?update='+Date['now']());global['plugins'][_0x122096]=_0x152173['default']||_0x152173;}catch(_0x327161){conn['logger']['error']('error\x20require\x20plugin\x20\x27'+_0x122096+'\x0a'+format(_0x327161)+'\x27');}finally{global['plugins']=Object['fromEntries'](Object['entries'](global['plugins'])['sort'](([_0x346dd3],[_0x52d4ad])=>_0x346dd3['localeCompare'](_0x52d4ad)));}}},Object['freeze'](global['reload']),watch(pluginFolder,global['reload']),await global['reloadHandler']();async function _quickTest(){const _0x1ae246=await Promise['all']([spawn('ffmpeg'),spawn('ffprobe'),spawn('ffmpeg',['-hide_banner','-loglevel','error','-filter_complex','color','-frames:v','1','-f','webp','-']),spawn('convert'),spawn('magick'),spawn('gm'),spawn('find',['--version'])]['map'](_0xa18f3=>{return Promise['race']([new Promise(_0x50f4f9=>{_0xa18f3['on']('close',_0x1fc95a=>{_0x50f4f9(_0x1fc95a!==0x7f);});}),new Promise(_0x1f1a61=>{_0xa18f3['on']('error',_0x467a35=>_0x1f1a61(![]));})]);})),[_0xfa9fa8,_0x591bde,_0x2287df,_0x5952e5,_0xfccb8f,_0x1b0ebb,_0x5ab94d]=_0x1ae246,_0x35214c=global['support']={'ffmpeg':_0xfa9fa8,'ffprobe':_0x591bde,'ffmpegWebp':_0x2287df,'convert':_0x5952e5,'magick':_0xfccb8f,'gm':_0x1b0ebb,'find':_0x5ab94d};Object['freeze'](global['support']);}setInterval(async()=>{if(stopped==='close'||!conn||!conn['user'])return;const _0x249e70=await clearTmp();},0x2bf20),setInterval(async()=>{if(stopped==='close'||!conn||!conn['user'])return;await purgeSession();},0x3e8*0x3c*0x3c),setInterval(async()=>{if(stopped==='close'||!conn||!conn['user'])return;await purgeSessionSB();},0x3e8*0x3c*0x3c),setInterval(async()=>{if(stopped==='close'||!conn||!conn['user'])return;await purgeOldFiles();},0x3e8*0x3c*0x3c),setInterval(async()=>{if(stopped==='close'||!conn||!conn['user'])return;const _0x48ec5c=process['uptime']()*0x3e8,_0x3a5137=clockString(_0x48ec5c),_0xf3d143='🤖\x20This\x20user\x20makes\x20use\x20of\x20HADES-BOT-MD\x20active\x20time\x20'+_0x3a5137+'\x20';await mconn['conn']['updateProfileStatus'](_0xf3d143)['catch'](_0x3db4e0=>_0x3db4e0);},0xea60);function clockString(_0xa5f84e){const _0x53ae8b=isNaN(_0xa5f84e)?'--':Math['floor'](_0xa5f84e/0x5265c00),_0x19f06e=isNaN(_0xa5f84e)?'--':Math['floor'](_0xa5f84e/0x36ee80)%0x18,_0xa461fc=isNaN(_0xa5f84e)?'--':Math['floor'](_0xa5f84e/0xea60)%0x3c,_0x21ab63=isNaN(_0xa5f84e)?'--':Math['floor'](_0xa5f84e/0x3e8)%0x3c;return[_0x53ae8b,'\x20Día(s)\x20️',_0x19f06e,'\x20Hora(s)\x20',_0xa461fc,'\x20Minuto(s)\x20',_0x21ab63,'\x20Segundo(s)\x20']['map'](_0x56ae8b=>_0x56ae8b['toString']()['padStart'](0x2,0x0))['join']('');}_quickTest()['catch'](console['error']);